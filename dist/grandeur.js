/*! For license information please see grandeur.js.LICENSE.txt */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.grandeur=e():t.grandeur=e()}(this,(()=>(()=>{var t={320:(t,e)=>{"use strict";function r(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function n(t){if("boolean"!=typeof t)throw new Error(`Expected boolean, not ${t}`)}function o(t,...e){if(!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new TypeError(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function i(t){if("function"!=typeof t||"function"!=typeof t.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");r(t.outputLen),r(t.blockLen)}function a(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function s(t,e){o(t);const r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}Object.defineProperty(e,"__esModule",{value:!0}),e.output=e.exists=e.hash=e.bytes=e.bool=e.number=void 0,e.number=r,e.bool=n,e.bytes=o,e.hash=i,e.exists=a,e.output=s;const u={number:r,bool:n,bytes:o,hash:i,exists:a,output:s};e.default=u},873:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.add=e.toBig=e.split=e.fromBig=void 0;const r=BigInt(2**32-1),n=BigInt(32);function o(t,e=!1){return e?{h:Number(t&r),l:Number(t>>n&r)}:{h:0|Number(t>>n&r),l:0|Number(t&r)}}function i(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:a,l:s}=o(t[i],e);[r[i],n[i]]=[a,s]}return[r,n]}function a(t,e,r,n){const o=(e>>>0)+(n>>>0);return{h:t+r+(o/2**32|0)|0,l:0|o}}e.fromBig=o,e.split=i,e.toBig=(t,e)=>BigInt(t>>>0)<<n|BigInt(e>>>0),e.add=a;const s={fromBig:o,split:i,toBig:e.toBig,shrSH:(t,e,r)=>t>>>r,shrSL:(t,e,r)=>t<<32-r|e>>>r,rotrSH:(t,e,r)=>t>>>r|e<<32-r,rotrSL:(t,e,r)=>t<<32-r|e>>>r,rotrBH:(t,e,r)=>t<<64-r|e>>>r-32,rotrBL:(t,e,r)=>t>>>r-32|e<<64-r,rotr32H:(t,e)=>e,rotr32L:(t,e)=>t,rotlSH:(t,e,r)=>t<<r|e>>>32-r,rotlSL:(t,e,r)=>e<<r|t>>>32-r,rotlBH:(t,e,r)=>e<<r-32|t>>>64-r,rotlBL:(t,e,r)=>t<<r-32|e>>>64-r,add:a,add3L:(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),add3H:(t,e,r,n)=>e+r+n+(t/2**32|0)|0,add4L:(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),add4H:(t,e,r,n,o)=>e+r+n+o+(t/2**32|0)|0,add5H:(t,e,r,n,o,i)=>e+r+n+o+i+(t/2**32|0)|0,add5L:(t,e,r,n,o)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(o>>>0)};e.default=s},945:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.crypto=void 0,e.crypto="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0},426:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.shake256=e.shake128=e.keccak_512=e.keccak_384=e.keccak_256=e.keccak_224=e.sha3_512=e.sha3_384=e.sha3_256=e.sha3_224=e.Keccak=e.keccakP=void 0;const n=r(320),o=r(873),i=r(89),[a,s,u]=[[],[],[]],c=BigInt(0),f=BigInt(1),h=BigInt(2),l=BigInt(7),p=BigInt(256),d=BigInt(113);for(let t=0,e=f,r=1,n=0;t<24;t++){[r,n]=[n,(2*r+3*n)%5],a.push(2*(5*n+r)),s.push((t+1)*(t+2)/2%64);let o=c;for(let t=0;t<7;t++)e=(e<<f^(e>>l)*d)%p,e&h&&(o^=f<<(f<<BigInt(t))-f);u.push(o)}const[y,v]=o.default.split(u,!0),w=(t,e,r)=>r>32?o.default.rotlBH(t,e,r):o.default.rotlSH(t,e,r),g=(t,e,r)=>r>32?o.default.rotlBL(t,e,r):o.default.rotlSL(t,e,r);function b(t,e=24){const r=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let e=0;e<10;e++)r[e]=t[e]^t[e+10]^t[e+20]^t[e+30]^t[e+40];for(let e=0;e<10;e+=2){const n=(e+8)%10,o=(e+2)%10,i=r[o],a=r[o+1],s=w(i,a,1)^r[n],u=g(i,a,1)^r[n+1];for(let r=0;r<50;r+=10)t[e+r]^=s,t[e+r+1]^=u}let e=t[2],o=t[3];for(let r=0;r<24;r++){const n=s[r],i=w(e,o,n),u=g(e,o,n),c=a[r];e=t[c],o=t[c+1],t[c]=i,t[c+1]=u}for(let e=0;e<50;e+=10){for(let n=0;n<10;n++)r[n]=t[e+n];for(let n=0;n<10;n++)t[e+n]^=~r[(n+2)%10]&r[(n+4)%10]}t[0]^=y[n],t[1]^=v[n]}r.fill(0)}e.keccakP=b;class m extends i.Hash{constructor(t,e,r,o=!1,a=24){if(super(),this.blockLen=t,this.suffix=e,this.outputLen=r,this.enableXOF=o,this.rounds=a,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,n.default.number(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,i.u32)(this.state)}keccak(){b(this.state32,this.rounds),this.posOut=0,this.pos=0}update(t){n.default.exists(this);const{blockLen:e,state:r}=this,o=(t=(0,i.toBytes)(t)).length;for(let n=0;n<o;){const i=Math.min(e-this.pos,o-n);for(let e=0;e<i;e++)r[this.pos++]^=t[n++];this.pos===e&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:e,pos:r,blockLen:n}=this;t[r]^=e,0!=(128&e)&&r===n-1&&this.keccak(),t[n-1]^=128,this.keccak()}writeInto(t){n.default.exists(this,!1),n.default.bytes(t),this.finish();const e=this.state,{blockLen:r}=this;for(let n=0,o=t.length;n<o;){this.posOut>=r&&this.keccak();const i=Math.min(r-this.posOut,o-n);t.set(e.subarray(this.posOut,this.posOut+i),n),this.posOut+=i,n+=i}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return n.default.number(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(n.default.output(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){const{blockLen:e,suffix:r,outputLen:n,rounds:o,enableXOF:i}=this;return t||(t=new m(e,r,n,i,o)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=o,t.suffix=r,t.outputLen=n,t.enableXOF=i,t.destroyed=this.destroyed,t}}e.Keccak=m;const E=(t,e,r)=>(0,i.wrapConstructor)((()=>new m(e,t,r)));e.sha3_224=E(6,144,28),e.sha3_256=E(6,136,32),e.sha3_384=E(6,104,48),e.sha3_512=E(6,72,64),e.keccak_224=E(1,144,28),e.keccak_256=E(1,136,32),e.keccak_384=E(1,104,48),e.keccak_512=E(1,72,64);const x=(t,e,r)=>(0,i.wrapConstructorWithOpts)(((n={})=>new m(e,t,void 0===n.dkLen?r:n.dkLen,!0)));e.shake128=x(31,168,16),e.shake256=x(31,136,32)},89:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.randomBytes=e.wrapConstructorWithOpts=e.wrapConstructor=e.checkOpts=e.Hash=e.concatBytes=e.toBytes=e.utf8ToBytes=e.asyncLoop=e.nextTick=e.hexToBytes=e.bytesToHex=e.isLE=e.rotr=e.createView=e.u32=e.u8=void 0;const n=r(945);if(e.u8=t=>new Uint8Array(t.buffer,t.byteOffset,t.byteLength),e.u32=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),e.createView=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),e.rotr=(t,e)=>t<<32-e|t>>>e,e.isLE=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0],!e.isLE)throw new Error("Non little-endian hardware is not supported");const o=Array.from({length:256},((t,e)=>e.toString(16).padStart(2,"0")));function i(t){if("string"!=typeof t)throw new TypeError("utf8ToBytes expected string, got "+typeof t);return(new TextEncoder).encode(t)}function a(t){if("string"==typeof t&&(t=i(t)),!(t instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof t})`);return t}e.bytesToHex=function(t){if(!(t instanceof Uint8Array))throw new Error("Uint8Array expected");let e="";for(let r=0;r<t.length;r++)e+=o[t[r]];return e},e.hexToBytes=function(t){if("string"!=typeof t)throw new TypeError("hexToBytes: expected string, got "+typeof t);if(t.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const e=new Uint8Array(t.length/2);for(let r=0;r<e.length;r++){const n=2*r,o=t.slice(n,n+2),i=Number.parseInt(o,16);if(Number.isNaN(i)||i<0)throw new Error("Invalid byte sequence");e[r]=i}return e},e.nextTick=async()=>{},e.asyncLoop=async function(t,r,n){let o=Date.now();for(let i=0;i<t;i++){n(i);const t=Date.now()-o;t>=0&&t<r||(await(0,e.nextTick)(),o+=t)}},e.utf8ToBytes=i,e.toBytes=a,e.concatBytes=function(...t){if(!t.every((t=>t instanceof Uint8Array)))throw new Error("Uint8Array list expected");if(1===t.length)return t[0];const e=t.reduce(((t,e)=>t+e.length),0),r=new Uint8Array(e);for(let e=0,n=0;e<t.length;e++){const o=t[e];r.set(o,n),n+=o.length}return r},e.Hash=class{clone(){return this._cloneInto()}},e.checkOpts=function(t,e){if(void 0!==e&&("object"!=typeof e||(r=e,"[object Object]"!==Object.prototype.toString.call(r)||r.constructor!==Object)))throw new TypeError("Options should be object or undefined");var r;return Object.assign(t,e)},e.wrapConstructor=function(t){const e=e=>t().update(a(e)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e},e.wrapConstructorWithOpts=function(t){const e=(e,r)=>t(r).update(a(e)).digest(),r=t({});return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=e=>t(e),e},e.randomBytes=function(t=32){if(n.crypto&&"function"==typeof n.crypto.getRandomValues)return n.crypto.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}},981:(t,e,r)=>{const{createId:n,init:o,getConstants:i,isCuid:a}=r(679);t.exports.Mc=n},679:(t,e,r)=>{const{sha3_512:n}=r(426),o=(t=4,e=Math.random)=>{let r="";for(;r.length<t;)r+=Math.floor(36*e()).toString(36);return r};function i(t){let e=8n,r=0n;for(const n of t.values())r=(r<<e)+BigInt(n);return r}const a=(t="")=>i(n(t)).toString(36).slice(1),s=Array.from({length:26},((t,e)=>String.fromCharCode(e+97))),u=({globalObj:t=(void 0!==r.g?r.g:"undefined"!=typeof window?window:{})}={})=>{const e=Object.keys(t).toString(),n=e.length?e+o(32):o(32);return a(n).substring(0,32)},c=t=>()=>t++,f=({random:t=Math.random,counter:e=c(Math.floor(476782367*t())),length:r=24,fingerprint:n=u()}={})=>function(){const i=(t=>s[Math.floor(t()*s.length)])(t),u=Date.now().toString(36),c=e().toString(36),f=o(r,t);return`${i+a(`${u+f+c+n}`).substring(1,r)}`},h=f();t.exports.getConstants=()=>({defaultLength:24,bigLength:32}),t.exports.init=f,t.exports.createId=h,t.exports.bufToBigInt=i,t.exports.createCounter=c,t.exports.createFingerprint=u,t.exports.isCuid=(t,{minLength:e=2,maxLength:r=32}={})=>{const n=t.length,o=/^[0-9a-z]+$/;try{if("string"==typeof t&&n>=e&&n<=r&&o.test(t))return!0}finally{}return!1}},187:t=>{"use strict";var e,r="object"==typeof Reflect?Reflect:null,n=r&&"function"==typeof r.apply?r.apply:function(t,e,r){return Function.prototype.apply.call(t,e,r)};e=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var o=Number.isNaN||function(t){return t!=t};function i(){i.init.call(this)}t.exports=i,t.exports.once=function(t,e){return new Promise((function(r,n){function o(r){t.removeListener(e,i),n(r)}function i(){"function"==typeof t.removeListener&&t.removeListener("error",o),r([].slice.call(arguments))}y(t,e,i,{once:!0}),"error"!==e&&function(t,e,r){"function"==typeof t.on&&y(t,"error",e,{once:!0})}(t,o)}))},i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var a=10;function s(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function u(t){return void 0===t._maxListeners?i.defaultMaxListeners:t._maxListeners}function c(t,e,r,n){var o,i,a,c;if(s(r),void 0===(i=t._events)?(i=t._events=Object.create(null),t._eventsCount=0):(void 0!==i.newListener&&(t.emit("newListener",e,r.listener?r.listener:r),i=t._events),a=i[e]),void 0===a)a=i[e]=r,++t._eventsCount;else if("function"==typeof a?a=i[e]=n?[r,a]:[a,r]:n?a.unshift(r):a.push(r),(o=u(t))>0&&a.length>o&&!a.warned){a.warned=!0;var f=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");f.name="MaxListenersExceededWarning",f.emitter=t,f.type=e,f.count=a.length,c=f,console&&console.warn&&console.warn(c)}return t}function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},o=f.bind(n);return o.listener=r,n.wrapFn=o,o}function l(t,e,r){var n=t._events;if(void 0===n)return[];var o=n[e];return void 0===o?[]:"function"==typeof o?r?[o.listener||o]:[o]:r?function(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}(o):d(o,o.length)}function p(t){var e=this._events;if(void 0!==e){var r=e[t];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function d(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function y(t,e,r,n){if("function"==typeof t.on)n.once?t.once(e,r):t.on(e,r);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function o(i){n.once&&t.removeEventListener(e,o),r(i)}))}}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(t){if("number"!=typeof t||t<0||o(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");a=t}}),i.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||o(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},i.prototype.getMaxListeners=function(){return u(this)},i.prototype.emit=function(t){for(var e=[],r=1;r<arguments.length;r++)e.push(arguments[r]);var o="error"===t,i=this._events;if(void 0!==i)o=o&&void 0===i.error;else if(!o)return!1;if(o){var a;if(e.length>0&&(a=e[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var u=i[t];if(void 0===u)return!1;if("function"==typeof u)n(u,this,e);else{var c=u.length,f=d(u,c);for(r=0;r<c;++r)n(f[r],this,e)}return!0},i.prototype.addListener=function(t,e){return c(this,t,e,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(t,e){return c(this,t,e,!0)},i.prototype.once=function(t,e){return s(e),this.on(t,h(this,t,e)),this},i.prototype.prependOnceListener=function(t,e){return s(e),this.prependListener(t,h(this,t,e)),this},i.prototype.removeListener=function(t,e){var r,n,o,i,a;if(s(e),void 0===(n=this._events))return this;if(void 0===(r=n[t]))return this;if(r===e||r.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete n[t],n.removeListener&&this.emit("removeListener",t,r.listener||e));else if("function"!=typeof r){for(o=-1,i=r.length-1;i>=0;i--)if(r[i]===e||r[i].listener===e){a=r[i].listener,o=i;break}if(o<0)return this;0===o?r.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(r,o),1===r.length&&(n[t]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",t,a||e)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(t){var e,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[t]),this;if(0===arguments.length){var o,i=Object.keys(r);for(n=0;n<i.length;++n)"removeListener"!==(o=i[n])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=r[t]))this.removeListener(t,e);else if(void 0!==e)for(n=e.length-1;n>=0;n--)this.removeListener(t,e[n]);return this},i.prototype.listeners=function(t){return l(this,t,!0)},i.prototype.rawListeners=function(t){return l(this,t,!1)},i.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):p.call(t,e)},i.prototype.listenerCount=p,i.prototype.eventNames=function(){return this._eventsCount>0?e(this._events):[]}},559:function(t,e,r){var n;!function(o){"use strict";function i(t){var r=t&&t.Promise||o.Promise,n=t&&t.XMLHttpRequest||o.XMLHttpRequest;return function(){var t=Object.create(o,{fetch:{value:void 0,writable:!0}});return function(e){var o=void 0!==t&&t||"undefined"!=typeof self&&self||void 0!==o&&o,i="URLSearchParams"in o,a="Symbol"in o&&"iterator"in Symbol,s="FileReader"in o&&"Blob"in o&&function(){try{return new Blob,!0}catch(t){return!1}}(),u="FormData"in o,c="ArrayBuffer"in o;if(c)var f=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],h=ArrayBuffer.isView||function(t){return t&&f.indexOf(Object.prototype.toString.call(t))>-1};function l(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(t)||""===t)throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function p(t){return"string"!=typeof t&&(t=String(t)),t}function d(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return a&&(e[Symbol.iterator]=function(){return e}),e}function y(t){this.map={},t instanceof y?t.forEach((function(t,e){this.append(e,t)}),this):Array.isArray(t)?t.forEach((function(t){this.append(t[0],t[1])}),this):t&&Object.getOwnPropertyNames(t).forEach((function(e){this.append(e,t[e])}),this)}function v(t){if(t.bodyUsed)return r.reject(new TypeError("Already read"));t.bodyUsed=!0}function w(t){return new r((function(e,r){t.onload=function(){e(t.result)},t.onerror=function(){r(t.error)}}))}function g(t){var e=new FileReader,r=w(e);return e.readAsArrayBuffer(t),r}function b(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function m(){return this.bodyUsed=!1,this._initBody=function(t){var e;this.bodyUsed=this.bodyUsed,this._bodyInit=t,t?"string"==typeof t?this._bodyText=t:s&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:u&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:i&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():c&&s&&((e=t)&&DataView.prototype.isPrototypeOf(e))?(this._bodyArrayBuffer=b(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c&&(ArrayBuffer.prototype.isPrototypeOf(t)||h(t))?this._bodyArrayBuffer=b(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):i&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},s&&(this.blob=function(){var t=v(this);if(t)return t;if(this._bodyBlob)return r.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return r.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return r.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?v(this)||(ArrayBuffer.isView(this._bodyArrayBuffer)?r.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):r.resolve(this._bodyArrayBuffer)):this.blob().then(g)}),this.text=function(){var t,e,n,o=v(this);if(o)return o;if(this._bodyBlob)return t=this._bodyBlob,e=new FileReader,n=w(e),e.readAsText(t),n;if(this._bodyArrayBuffer)return r.resolve(function(t){for(var e=new Uint8Array(t),r=new Array(e.length),n=0;n<e.length;n++)r[n]=String.fromCharCode(e[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return r.resolve(this._bodyText)},u&&(this.formData=function(){return this.text().then(A)}),this.json=function(){return this.text().then(JSON.parse)},this}y.prototype.append=function(t,e){t=l(t),e=p(e);var r=this.map[t];this.map[t]=r?r+", "+e:e},y.prototype.delete=function(t){delete this.map[l(t)]},y.prototype.get=function(t){return t=l(t),this.has(t)?this.map[t]:null},y.prototype.has=function(t){return this.map.hasOwnProperty(l(t))},y.prototype.set=function(t,e){this.map[l(t)]=p(e)},y.prototype.forEach=function(t,e){for(var r in this.map)this.map.hasOwnProperty(r)&&t.call(e,this.map[r],r,this)},y.prototype.keys=function(){var t=[];return this.forEach((function(e,r){t.push(r)})),d(t)},y.prototype.values=function(){var t=[];return this.forEach((function(e){t.push(e)})),d(t)},y.prototype.entries=function(){var t=[];return this.forEach((function(e,r){t.push([r,e])})),d(t)},a&&(y.prototype[Symbol.iterator]=y.prototype.entries);var E=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function x(t,e){if(!(this instanceof x))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var r,n,o=(e=e||{}).body;if(t instanceof x){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new y(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,o||null==t._bodyInit||(o=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new y(e.headers)),this.method=(r=e.method||this.method||"GET",n=r.toUpperCase(),E.indexOf(n)>-1?n:r),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(o),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==e.cache&&"no-cache"!==e.cache)){var i=/([?&])_=[^&]*/;if(i.test(this.url))this.url=this.url.replace(i,"$1_="+(new Date).getTime());else{this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}}function A(t){var e=new FormData;return t.trim().split("&").forEach((function(t){if(t){var r=t.split("="),n=r.shift().replace(/\+/g," "),o=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(n),decodeURIComponent(o))}})),e}function S(t,e){if(!(this instanceof S))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"",this.headers=new y(e.headers),this.url=e.url||"",this._initBody(t)}x.prototype.clone=function(){return new x(this,{body:this._bodyInit})},m.call(x.prototype),m.call(S.prototype),S.prototype.clone=function(){return new S(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new y(this.headers),url:this.url})},S.error=function(){var t=new S(null,{status:0,statusText:""});return t.type="error",t};var O=[301,302,303,307,308];S.redirect=function(t,e){if(-1===O.indexOf(e))throw new RangeError("Invalid status code");return new S(null,{status:e,headers:{location:t}})},e.DOMException=o.DOMException;try{new e.DOMException}catch(t){e.DOMException=function(t,e){this.message=t,this.name=e;var r=Error(t);this.stack=r.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function L(t,i){return new r((function(r,a){var u=new x(t,i);if(u.signal&&u.signal.aborted)return a(new e.DOMException("Aborted","AbortError"));var f=new n;function h(){f.abort()}f.onload=function(){var t,e,n={status:f.status,statusText:f.statusText,headers:(t=f.getAllResponseHeaders()||"",e=new y,t.replace(/\r?\n[\t ]+/g," ").split("\r").map((function(t){return 0===t.indexOf("\n")?t.substr(1,t.length):t})).forEach((function(t){var r=t.split(":"),n=r.shift().trim();if(n){var o=r.join(":").trim();e.append(n,o)}})),e)};n.url="responseURL"in f?f.responseURL:n.headers.get("X-Request-URL");var o="response"in f?f.response:f.responseText;setTimeout((function(){r(new S(o,n))}),0)},f.onerror=function(){setTimeout((function(){a(new TypeError("Network request failed"))}),0)},f.ontimeout=function(){setTimeout((function(){a(new TypeError("Network request failed"))}),0)},f.onabort=function(){setTimeout((function(){a(new e.DOMException("Aborted","AbortError"))}),0)},f.open(u.method,function(t){try{return""===t&&o.location.href?o.location.href:t}catch(e){return t}}(u.url),!0),"include"===u.credentials?f.withCredentials=!0:"omit"===u.credentials&&(f.withCredentials=!1),"responseType"in f&&(s?f.responseType="blob":c&&u.headers.get("Content-Type")&&-1!==u.headers.get("Content-Type").indexOf("application/octet-stream")&&(f.responseType="arraybuffer")),!i||"object"!=typeof i.headers||i.headers instanceof y?u.headers.forEach((function(t,e){f.setRequestHeader(e,t)})):Object.getOwnPropertyNames(i.headers).forEach((function(t){f.setRequestHeader(t,p(i.headers[t]))})),u.signal&&(u.signal.addEventListener("abort",h),f.onreadystatechange=function(){4===f.readyState&&u.signal.removeEventListener("abort",h)}),f.send(void 0===u._bodyInit?null:u._bodyInit)}))}L.polyfill=!0,o.fetch||(o.fetch=L,o.Headers=y,o.Request=x,o.Response=S),e.Headers=y,e.Request=x,e.Response=S,e.fetch=L,Object.defineProperty(e,"__esModule",{value:!0})}(e),{fetch:t.fetch,Headers:t.Headers,Request:t.Request,Response:t.Response,DOMException:t.DOMException}}()}void 0===(n=function(){return i}.call(e,r,e,t))||(t.exports=n)}("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:void 0!==r.g?r.g:this)},90:(t,e,r)=>{var n;!function(){"use strict";var e="object"==typeof window?window:{};!e.HI_BASE32_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node&&(e=r.g);var o=!e.HI_BASE32_NO_COMMON_JS&&t.exports,i=r.amdO,a="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567".split(""),s={A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7,I:8,J:9,K:10,L:11,M:12,N:13,O:14,P:15,Q:16,R:17,S:18,T:19,U:20,V:21,W:22,X:23,Y:24,Z:25,2:26,3:27,4:28,5:29,6:30,7:31},u=[0,0,0,0,0,0,0,0],c=function(t,e){e.length>10&&(e="..."+e.substr(-10));var r=new Error("Decoded data is not valid UTF-8. Maybe try base32.decode.asBytes()? Partial data after reading "+t+" bytes: "+e+" <-");throw r.position=t,r},f=function(t){if(""===t)return[];if(!/^[A-Z2-7=]+$/.test(t))throw new Error("Invalid base32 characters");for(var e,r,n,o,i,a,u,c,f=[],h=0,l=(t=t.replace(/=/g,"")).length,p=0,d=l>>3<<3;p<d;)e=s[t.charAt(p++)],r=s[t.charAt(p++)],n=s[t.charAt(p++)],o=s[t.charAt(p++)],i=s[t.charAt(p++)],a=s[t.charAt(p++)],u=s[t.charAt(p++)],c=s[t.charAt(p++)],f[h++]=255&(e<<3|r>>>2),f[h++]=255&(r<<6|n<<1|o>>>4),f[h++]=255&(o<<4|i>>>1),f[h++]=255&(i<<7|a<<2|u>>>3),f[h++]=255&(u<<5|c);var y=l-d;return 2===y?(e=s[t.charAt(p++)],r=s[t.charAt(p++)],f[h++]=255&(e<<3|r>>>2)):4===y?(e=s[t.charAt(p++)],r=s[t.charAt(p++)],n=s[t.charAt(p++)],o=s[t.charAt(p++)],f[h++]=255&(e<<3|r>>>2),f[h++]=255&(r<<6|n<<1|o>>>4)):5===y?(e=s[t.charAt(p++)],r=s[t.charAt(p++)],n=s[t.charAt(p++)],o=s[t.charAt(p++)],i=s[t.charAt(p++)],f[h++]=255&(e<<3|r>>>2),f[h++]=255&(r<<6|n<<1|o>>>4),f[h++]=255&(o<<4|i>>>1)):7===y&&(e=s[t.charAt(p++)],r=s[t.charAt(p++)],n=s[t.charAt(p++)],o=s[t.charAt(p++)],i=s[t.charAt(p++)],a=s[t.charAt(p++)],u=s[t.charAt(p++)],f[h++]=255&(e<<3|r>>>2),f[h++]=255&(r<<6|n<<1|o>>>4),f[h++]=255&(o<<4|i>>>1),f[h++]=255&(i<<7|a<<2|u>>>3)),f},h=function(t,e){if(!e)return function(t){for(var e,r,n="",o=t.length,i=0,a=0;i<o;)if((e=t[i++])<=127)n+=String.fromCharCode(e);else{e>191&&e<=223?(r=31&e,a=1):e<=239?(r=15&e,a=2):e<=247?(r=7&e,a=3):c(i,n);for(var s=0;s<a;++s)((e=t[i++])<128||e>191)&&c(i,n),r<<=6,r+=63&e;r>=55296&&r<=57343&&c(i,n),r>1114111&&c(i,n),r<=65535?n+=String.fromCharCode(r):(r-=65536,n+=String.fromCharCode(55296+(r>>10)),n+=String.fromCharCode(56320+(1023&r)))}return n}(f(t));if(""===t)return"";if(!/^[A-Z2-7=]+$/.test(t))throw new Error("Invalid base32 characters");var r,n,o,i,a,u,h,l,p="",d=t.indexOf("=");-1===d&&(d=t.length);for(var y=0,v=d>>3<<3;y<v;)r=s[t.charAt(y++)],n=s[t.charAt(y++)],o=s[t.charAt(y++)],i=s[t.charAt(y++)],a=s[t.charAt(y++)],u=s[t.charAt(y++)],h=s[t.charAt(y++)],l=s[t.charAt(y++)],p+=String.fromCharCode(255&(r<<3|n>>>2))+String.fromCharCode(255&(n<<6|o<<1|i>>>4))+String.fromCharCode(255&(i<<4|a>>>1))+String.fromCharCode(255&(a<<7|u<<2|h>>>3))+String.fromCharCode(255&(h<<5|l));var w=d-v;return 2===w?(r=s[t.charAt(y++)],n=s[t.charAt(y++)],p+=String.fromCharCode(255&(r<<3|n>>>2))):4===w?(r=s[t.charAt(y++)],n=s[t.charAt(y++)],o=s[t.charAt(y++)],i=s[t.charAt(y++)],p+=String.fromCharCode(255&(r<<3|n>>>2))+String.fromCharCode(255&(n<<6|o<<1|i>>>4))):5===w?(r=s[t.charAt(y++)],n=s[t.charAt(y++)],o=s[t.charAt(y++)],i=s[t.charAt(y++)],a=s[t.charAt(y++)],p+=String.fromCharCode(255&(r<<3|n>>>2))+String.fromCharCode(255&(n<<6|o<<1|i>>>4))+String.fromCharCode(255&(i<<4|a>>>1))):7===w&&(r=s[t.charAt(y++)],n=s[t.charAt(y++)],o=s[t.charAt(y++)],i=s[t.charAt(y++)],a=s[t.charAt(y++)],u=s[t.charAt(y++)],h=s[t.charAt(y++)],p+=String.fromCharCode(255&(r<<3|n>>>2))+String.fromCharCode(255&(n<<6|o<<1|i>>>4))+String.fromCharCode(255&(i<<4|a>>>1))+String.fromCharCode(255&(a<<7|u<<2|h>>>3))),p},l={encode:function(t,e){var r="string"!=typeof t;return r&&t.constructor===ArrayBuffer&&(t=new Uint8Array(t)),r?function(t){for(var e,r,n,o,i,s="",u=t.length,c=0,f=5*parseInt(u/5);c<f;)e=t[c++],r=t[c++],n=t[c++],o=t[c++],i=t[c++],s+=a[e>>>3]+a[31&(e<<2|r>>>6)]+a[r>>>1&31]+a[31&(r<<4|n>>>4)]+a[31&(n<<1|o>>>7)]+a[o>>>2&31]+a[31&(o<<3|i>>>5)]+a[31&i];var h=u-f;return 1===h?(e=t[c],s+=a[e>>>3]+a[e<<2&31]+"======"):2===h?(e=t[c++],r=t[c],s+=a[e>>>3]+a[31&(e<<2|r>>>6)]+a[r>>>1&31]+a[r<<4&31]+"===="):3===h?(e=t[c++],r=t[c++],n=t[c],s+=a[e>>>3]+a[31&(e<<2|r>>>6)]+a[r>>>1&31]+a[31&(r<<4|n>>>4)]+a[n<<1&31]+"==="):4===h&&(e=t[c++],r=t[c++],n=t[c++],o=t[c],s+=a[e>>>3]+a[31&(e<<2|r>>>6)]+a[r>>>1&31]+a[31&(r<<4|n>>>4)]+a[31&(n<<1|o>>>7)]+a[o>>>2&31]+a[o<<3&31]+"="),s}(t):e?function(t){for(var e,r,n,o,i,s="",u=t.length,c=0,f=5*parseInt(u/5);c<f;)e=t.charCodeAt(c++),r=t.charCodeAt(c++),n=t.charCodeAt(c++),o=t.charCodeAt(c++),i=t.charCodeAt(c++),s+=a[e>>>3]+a[31&(e<<2|r>>>6)]+a[r>>>1&31]+a[31&(r<<4|n>>>4)]+a[31&(n<<1|o>>>7)]+a[o>>>2&31]+a[31&(o<<3|i>>>5)]+a[31&i];var h=u-f;return 1===h?(e=t.charCodeAt(c),s+=a[e>>>3]+a[e<<2&31]+"======"):2===h?(e=t.charCodeAt(c++),r=t.charCodeAt(c),s+=a[e>>>3]+a[31&(e<<2|r>>>6)]+a[r>>>1&31]+a[r<<4&31]+"===="):3===h?(e=t.charCodeAt(c++),r=t.charCodeAt(c++),n=t.charCodeAt(c),s+=a[e>>>3]+a[31&(e<<2|r>>>6)]+a[r>>>1&31]+a[31&(r<<4|n>>>4)]+a[n<<1&31]+"==="):4===h&&(e=t.charCodeAt(c++),r=t.charCodeAt(c++),n=t.charCodeAt(c++),o=t.charCodeAt(c),s+=a[e>>>3]+a[31&(e<<2|r>>>6)]+a[r>>>1&31]+a[31&(r<<4|n>>>4)]+a[31&(n<<1|o>>>7)]+a[o>>>2&31]+a[o<<3&31]+"="),s}(t):function(t){var e,r,n,o,i,s,c,f=!1,h="",l=0,p=0,d=t.length;if(""===t)return h;do{for(u[0]=u[5],u[1]=u[6],u[2]=u[7],c=p;l<d&&c<5;++l)(s=t.charCodeAt(l))<128?u[c++]=s:s<2048?(u[c++]=192|s>>6,u[c++]=128|63&s):s<55296||s>=57344?(u[c++]=224|s>>12,u[c++]=128|s>>6&63,u[c++]=128|63&s):(s=65536+((1023&s)<<10|1023&t.charCodeAt(++l)),u[c++]=240|s>>18,u[c++]=128|s>>12&63,u[c++]=128|s>>6&63,u[c++]=128|63&s);p=c-5,l===d&&++l,l>d&&c<6&&(f=!0),e=u[0],c>4?(r=u[1],n=u[2],o=u[3],i=u[4],h+=a[e>>>3]+a[31&(e<<2|r>>>6)]+a[r>>>1&31]+a[31&(r<<4|n>>>4)]+a[31&(n<<1|o>>>7)]+a[o>>>2&31]+a[31&(o<<3|i>>>5)]+a[31&i]):1===c?h+=a[e>>>3]+a[e<<2&31]+"======":2===c?(r=u[1],h+=a[e>>>3]+a[31&(e<<2|r>>>6)]+a[r>>>1&31]+a[r<<4&31]+"===="):3===c?(r=u[1],n=u[2],h+=a[e>>>3]+a[31&(e<<2|r>>>6)]+a[r>>>1&31]+a[31&(r<<4|n>>>4)]+a[n<<1&31]+"==="):(r=u[1],n=u[2],o=u[3],h+=a[e>>>3]+a[31&(e<<2|r>>>6)]+a[r>>>1&31]+a[31&(r<<4|n>>>4)]+a[31&(n<<1|o>>>7)]+a[o>>>2&31]+a[o<<3&31]+"=")}while(!f);return h}(t)},decode:h};h.asBytes=f,o?t.exports=l:(e.base32=l,i&&(void 0===(n=function(){return l}.call(l,r,l,t))||(t.exports=n)))}()},53:function(t){t.exports=function(){"use strict";var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function e(t,e,r,n){var o,i,a,s=e||[0],u=(r=r||0)>>>3,c=-1===n?3:0;for(o=0;o<t.length;o+=1)i=(a=o+u)>>>2,s.length<=i&&s.push(0),s[i]|=t[o]<<8*(c+n*(a%4));return{value:s,binLen:8*t.length+r}}function r(r,n,o){switch(n){case"UTF8":case"UTF16BE":case"UTF16LE":break;default:throw new Error("encoding must be UTF8, UTF16BE, or UTF16LE")}switch(r){case"HEX":return function(t,e,r){return function(t,e,r,n){var o,i,a,s;if(0!=t.length%2)throw new Error("String of HEX type must be in byte increments");var u=e||[0],c=(r=r||0)>>>3,f=-1===n?3:0;for(o=0;o<t.length;o+=2){if(i=parseInt(t.substr(o,2),16),isNaN(i))throw new Error("String of HEX type contains invalid characters");for(a=(s=(o>>>1)+c)>>>2;u.length<=a;)u.push(0);u[a]|=i<<8*(f+n*(s%4))}return{value:u,binLen:4*t.length+r}}(t,e,r,o)};case"TEXT":return function(t,e,r){return function(t,e,r,n,o){var i,a,s,u,c,f,h,l,p=0,d=r||[0],y=(n=n||0)>>>3;if("UTF8"===e)for(h=-1===o?3:0,s=0;s<t.length;s+=1)for(a=[],128>(i=t.charCodeAt(s))?a.push(i):2048>i?(a.push(192|i>>>6),a.push(128|63&i)):55296>i||57344<=i?a.push(224|i>>>12,128|i>>>6&63,128|63&i):(s+=1,i=65536+((1023&i)<<10|1023&t.charCodeAt(s)),a.push(240|i>>>18,128|i>>>12&63,128|i>>>6&63,128|63&i)),u=0;u<a.length;u+=1){for(c=(f=p+y)>>>2;d.length<=c;)d.push(0);d[c]|=a[u]<<8*(h+o*(f%4)),p+=1}else for(h=-1===o?2:0,l="UTF16LE"===e&&1!==o||"UTF16LE"!==e&&1===o,s=0;s<t.length;s+=1){for(i=t.charCodeAt(s),!0===l&&(i=(u=255&i)<<8|i>>>8),c=(f=p+y)>>>2;d.length<=c;)d.push(0);d[c]|=i<<8*(h+o*(f%4)),p+=2}return{value:d,binLen:8*p+n}}(t,n,e,r,o)};case"B64":return function(e,r,n){return function(e,r,n,o){var i,a,s,u,c,f,h=0,l=r||[0],p=(n=n||0)>>>3,d=-1===o?3:0,y=e.indexOf("=");if(-1===e.search(/^[a-zA-Z0-9=+/]+$/))throw new Error("Invalid character in base-64 string");if(e=e.replace(/=/g,""),-1!==y&&y<e.length)throw new Error("Invalid '=' found in base-64 string");for(i=0;i<e.length;i+=4){for(u=e.substr(i,4),s=0,a=0;a<u.length;a+=1)s|=t.indexOf(u.charAt(a))<<18-6*a;for(a=0;a<u.length-1;a+=1){for(c=(f=h+p)>>>2;l.length<=c;)l.push(0);l[c]|=(s>>>16-8*a&255)<<8*(d+o*(f%4)),h+=1}}return{value:l,binLen:8*h+n}}(e,r,n,o)};case"BYTES":return function(t,e,r){return function(t,e,r,n){var o,i,a,s,u=e||[0],c=(r=r||0)>>>3,f=-1===n?3:0;for(i=0;i<t.length;i+=1)o=t.charCodeAt(i),a=(s=i+c)>>>2,u.length<=a&&u.push(0),u[a]|=o<<8*(f+n*(s%4));return{value:u,binLen:8*t.length+r}}(t,e,r,o)};case"ARRAYBUFFER":try{new ArrayBuffer(0)}catch(t){throw new Error("ARRAYBUFFER not supported by this environment")}return function(t,r,n){return function(t,r,n,o){return e(new Uint8Array(t),r,n,o)}(t,r,n,o)};case"UINT8ARRAY":try{new Uint8Array(0)}catch(t){throw new Error("UINT8ARRAY not supported by this environment")}return function(t,r,n){return e(t,r,n,o)};default:throw new Error("format must be HEX, TEXT, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}}function n(e,r,n,o){switch(e){case"HEX":return function(t){return function(t,e,r,n){var o,i,a="",s=e/8,u=-1===r?3:0;for(o=0;o<s;o+=1)i=t[o>>>2]>>>8*(u+r*(o%4)),a+="0123456789abcdef".charAt(i>>>4&15)+"0123456789abcdef".charAt(15&i);return n.outputUpper?a.toUpperCase():a}(t,r,n,o)};case"B64":return function(e){return function(e,r,n,o){var i,a,s,u,c,f="",h=r/8,l=-1===n?3:0;for(i=0;i<h;i+=3)for(u=i+1<h?e[i+1>>>2]:0,c=i+2<h?e[i+2>>>2]:0,s=(e[i>>>2]>>>8*(l+n*(i%4))&255)<<16|(u>>>8*(l+n*((i+1)%4))&255)<<8|c>>>8*(l+n*((i+2)%4))&255,a=0;a<4;a+=1)f+=8*i+6*a<=r?t.charAt(s>>>6*(3-a)&63):o.b64Pad;return f}(e,r,n,o)};case"BYTES":return function(t){return function(t,e,r){var n,o,i="",a=e/8,s=-1===r?3:0;for(n=0;n<a;n+=1)o=t[n>>>2]>>>8*(s+r*(n%4))&255,i+=String.fromCharCode(o);return i}(t,r,n)};case"ARRAYBUFFER":try{new ArrayBuffer(0)}catch(t){throw new Error("ARRAYBUFFER not supported by this environment")}return function(t){return function(t,e,r){var n,o=e/8,i=new ArrayBuffer(o),a=new Uint8Array(i),s=-1===r?3:0;for(n=0;n<o;n+=1)a[n]=t[n>>>2]>>>8*(s+r*(n%4))&255;return i}(t,r,n)};case"UINT8ARRAY":try{new Uint8Array(0)}catch(t){throw new Error("UINT8ARRAY not supported by this environment")}return function(t){return function(t,e,r){var n,o=e/8,i=-1===r?3:0,a=new Uint8Array(o);for(n=0;n<o;n+=1)a[n]=t[n>>>2]>>>8*(i+r*(n%4))&255;return a}(t,r,n)};default:throw new Error("format must be HEX, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}}var o=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],i=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428],a=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],s="Chosen SHA variant is not supported";function u(t,e){var r,n,o=t.binLen>>>3,i=e.binLen>>>3,a=o<<3,s=4-o<<3;if(o%4!=0){for(r=0;r<i;r+=4)n=o+r>>>2,t.value[n]|=e.value[r>>>2]<<a,t.value.push(0),t.value[n+1]|=e.value[r>>>2]>>>s;return(t.value.length<<2)-4>=i+o&&t.value.pop(),{value:t.value,binLen:t.binLen+e.binLen}}return{value:t.value.concat(e.value),binLen:t.binLen+e.binLen}}function c(t){var e={outputUpper:!1,b64Pad:"=",outputLen:-1},r=t||{},n="Output length must be a multiple of 8";if(e.outputUpper=r.outputUpper||!1,r.b64Pad&&(e.b64Pad=r.b64Pad),r.outputLen){if(r.outputLen%8!=0)throw new Error(n);e.outputLen=r.outputLen}else if(r.shakeLen){if(r.shakeLen%8!=0)throw new Error(n);e.outputLen=r.shakeLen}if("boolean"!=typeof e.outputUpper)throw new Error("Invalid outputUpper formatting option");if("string"!=typeof e.b64Pad)throw new Error("Invalid b64Pad formatting option");return e}function f(t,e,n,o){var i=t+" must include a value and format";if(!e){if(!o)throw new Error(i);return o}if(void 0===e.value||!e.format)throw new Error(i);return r(e.format,e.encoding||"UTF8",n)(e.value)}var h=function(){function t(t,e,r){var n=r||{};if(this.t=e,this.i=n.encoding||"UTF8",this.numRounds=n.numRounds||1,isNaN(this.numRounds)||this.numRounds!==parseInt(this.numRounds,10)||1>this.numRounds)throw new Error("numRounds must a integer >= 1");this.o=t,this.u=[],this.s=0,this.h=!1,this.v=0,this.A=!1,this.l=[],this.H=[]}return t.prototype.update=function(t){var e,r=0,n=this.S>>>5,o=this.p(t,this.u,this.s),i=o.binLen,a=o.value,s=i>>>5;for(e=0;e<s;e+=n)r+this.S<=i&&(this.m=this.R(a.slice(e,e+n),this.m),r+=this.S);this.v+=r,this.u=a.slice(r>>>5),this.s=i%this.S,this.h=!0},t.prototype.getHash=function(t,e){var r,o,i=this.U,a=c(e);if(this.T){if(-1===a.outputLen)throw new Error("Output length must be specified in options");i=a.outputLen}var s=n(t,i,this.C,a);if(this.A&&this.F)return s(this.F(a));for(o=this.K(this.u.slice(),this.s,this.v,this.B(this.m),i),r=1;r<this.numRounds;r+=1)this.T&&i%32!=0&&(o[o.length-1]&=16777215>>>24-i%32),o=this.K(o,i,0,this.L(this.o),i);return s(o)},t.prototype.setHMACKey=function(t,e,n){if(!this.g)throw new Error("Variant does not support HMAC");if(this.h)throw new Error("Cannot set MAC key after calling update");var o=r(e,(n||{}).encoding||"UTF8",this.C);this.k(o(t))},t.prototype.k=function(t){var e,r=this.S>>>3,n=r/4-1;if(1!==this.numRounds)throw new Error("Cannot set numRounds with MAC");if(this.A)throw new Error("MAC key already set");for(r<t.binLen/8&&(t.value=this.K(t.value,t.binLen,0,this.L(this.o),this.U));t.value.length<=n;)t.value.push(0);for(e=0;e<=n;e+=1)this.l[e]=909522486^t.value[e],this.H[e]=1549556828^t.value[e];this.m=this.R(this.l,this.m),this.v=this.S,this.A=!0},t.prototype.getHMAC=function(t,e){var r=c(e);return n(t,this.U,this.C,r)(this.Y())},t.prototype.Y=function(){var t;if(!this.A)throw new Error("Cannot call getHMAC without first setting MAC key");var e=this.K(this.u.slice(),this.s,this.v,this.B(this.m),this.U);return t=this.R(this.H,this.L(this.o)),this.K(e,this.U,this.S,t,this.U)},t}(),l=function(t,e){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)};function p(t,e){function r(){this.constructor=t}l(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}function d(t,e){return t<<e|t>>>32-e}function y(t,e){return t>>>e|t<<32-e}function v(t,e){return t>>>e}function w(t,e,r){return t^e^r}function g(t,e,r){return t&e^~t&r}function b(t,e,r){return t&e^t&r^e&r}function m(t){return y(t,2)^y(t,13)^y(t,22)}function E(t,e){var r=(65535&t)+(65535&e);return(65535&(t>>>16)+(e>>>16)+(r>>>16))<<16|65535&r}function x(t,e,r,n){var o=(65535&t)+(65535&e)+(65535&r)+(65535&n);return(65535&(t>>>16)+(e>>>16)+(r>>>16)+(n>>>16)+(o>>>16))<<16|65535&o}function A(t,e,r,n,o){var i=(65535&t)+(65535&e)+(65535&r)+(65535&n)+(65535&o);return(65535&(t>>>16)+(e>>>16)+(r>>>16)+(n>>>16)+(o>>>16)+(i>>>16))<<16|65535&i}function S(t){return y(t,7)^y(t,18)^v(t,3)}function O(t){return y(t,6)^y(t,11)^y(t,25)}function L(t){return[1732584193,4023233417,2562383102,271733878,3285377520]}function k(t,e){var r,n,o,i,a,s,u,c=[];for(r=e[0],n=e[1],o=e[2],i=e[3],a=e[4],u=0;u<80;u+=1)c[u]=u<16?t[u]:d(c[u-3]^c[u-8]^c[u-14]^c[u-16],1),s=u<20?A(d(r,5),g(n,o,i),a,1518500249,c[u]):u<40?A(d(r,5),w(n,o,i),a,1859775393,c[u]):u<60?A(d(r,5),b(n,o,i),a,2400959708,c[u]):A(d(r,5),w(n,o,i),a,3395469782,c[u]),a=i,i=o,o=d(n,30),n=r,r=s;return e[0]=E(r,e[0]),e[1]=E(n,e[1]),e[2]=E(o,e[2]),e[3]=E(i,e[3]),e[4]=E(a,e[4]),e}function I(t,e,r,n){for(var o,i=15+(e+65>>>9<<4),a=e+r;t.length<=i;)t.push(0);for(t[e>>>5]|=128<<24-e%32,t[i]=4294967295&a,t[i-1]=a/4294967296|0,o=0;o<t.length;o+=16)n=k(t.slice(o,o+16),n);return n}var N=function(t){function e(e,n,o){var i=this;if("SHA-1"!==e)throw new Error(s);var a=o||{};return(i=t.call(this,e,n,o)||this).g=!0,i.F=i.Y,i.C=-1,i.p=r(i.t,i.i,i.C),i.R=k,i.B=function(t){return t.slice()},i.L=L,i.K=I,i.m=[1732584193,4023233417,2562383102,271733878,3285377520],i.S=512,i.U=160,i.T=!1,a.hmacKey&&i.k(f("hmacKey",a.hmacKey,i.C)),i}return p(e,t),e}(h);function C(t){return"SHA-224"==t?i.slice():a.slice()}function T(t,e){var r,n,i,a,s,u,c,f,h,l,p,d,w=[];for(r=e[0],n=e[1],i=e[2],a=e[3],s=e[4],u=e[5],c=e[6],f=e[7],p=0;p<64;p+=1)w[p]=p<16?t[p]:x(y(d=w[p-2],17)^y(d,19)^v(d,10),w[p-7],S(w[p-15]),w[p-16]),h=A(f,O(s),g(s,u,c),o[p],w[p]),l=E(m(r),b(r,n,i)),f=c,c=u,u=s,s=E(a,h),a=i,i=n,n=r,r=E(h,l);return e[0]=E(r,e[0]),e[1]=E(n,e[1]),e[2]=E(i,e[2]),e[3]=E(a,e[3]),e[4]=E(s,e[4]),e[5]=E(u,e[5]),e[6]=E(c,e[6]),e[7]=E(f,e[7]),e}var _=function(t){function e(e,n,o){var i=this;if("SHA-224"!==e&&"SHA-256"!==e)throw new Error(s);var a=o||{};return(i=t.call(this,e,n,o)||this).F=i.Y,i.g=!0,i.C=-1,i.p=r(i.t,i.i,i.C),i.R=T,i.B=function(t){return t.slice()},i.L=C,i.K=function(t,r,n,o){return function(t,e,r,n,o){for(var i,a=15+(e+65>>>9<<4),s=e+r;t.length<=a;)t.push(0);for(t[e>>>5]|=128<<24-e%32,t[a]=4294967295&s,t[a-1]=s/4294967296|0,i=0;i<t.length;i+=16)n=T(t.slice(i,i+16),n);return"SHA-224"===o?[n[0],n[1],n[2],n[3],n[4],n[5],n[6]]:n}(t,r,n,o,e)},i.m=C(e),i.S=512,i.U="SHA-224"===e?224:256,i.T=!1,a.hmacKey&&i.k(f("hmacKey",a.hmacKey,i.C)),i}return p(e,t),e}(h),j=function(t,e){this.N=t,this.I=e};function P(t,e){var r;return e>32?(r=64-e,new j(t.I<<e|t.N>>>r,t.N<<e|t.I>>>r)):0!==e?(r=32-e,new j(t.N<<e|t.I>>>r,t.I<<e|t.N>>>r)):t}function U(t,e){var r;return e<32?(r=32-e,new j(t.N>>>e|t.I<<r,t.I>>>e|t.N<<r)):(r=64-e,new j(t.I>>>e|t.N<<r,t.N>>>e|t.I<<r))}function D(t,e){return new j(t.N>>>e,t.I>>>e|t.N<<32-e)}function B(t,e,r){return new j(t.N&e.N^~t.N&r.N,t.I&e.I^~t.I&r.I)}function H(t,e,r){return new j(t.N&e.N^t.N&r.N^e.N&r.N,t.I&e.I^t.I&r.I^e.I&r.I)}function R(t){var e=U(t,28),r=U(t,34),n=U(t,39);return new j(e.N^r.N^n.N,e.I^r.I^n.I)}function F(t,e){var r,n;r=(65535&t.I)+(65535&e.I);var o=(65535&(n=(t.I>>>16)+(e.I>>>16)+(r>>>16)))<<16|65535&r;return r=(65535&t.N)+(65535&e.N)+(n>>>16),n=(t.N>>>16)+(e.N>>>16)+(r>>>16),new j((65535&n)<<16|65535&r,o)}function M(t,e,r,n){var o,i;o=(65535&t.I)+(65535&e.I)+(65535&r.I)+(65535&n.I);var a=(65535&(i=(t.I>>>16)+(e.I>>>16)+(r.I>>>16)+(n.I>>>16)+(o>>>16)))<<16|65535&o;return o=(65535&t.N)+(65535&e.N)+(65535&r.N)+(65535&n.N)+(i>>>16),i=(t.N>>>16)+(e.N>>>16)+(r.N>>>16)+(n.N>>>16)+(o>>>16),new j((65535&i)<<16|65535&o,a)}function K(t,e,r,n,o){var i,a;i=(65535&t.I)+(65535&e.I)+(65535&r.I)+(65535&n.I)+(65535&o.I);var s=(65535&(a=(t.I>>>16)+(e.I>>>16)+(r.I>>>16)+(n.I>>>16)+(o.I>>>16)+(i>>>16)))<<16|65535&i;return i=(65535&t.N)+(65535&e.N)+(65535&r.N)+(65535&n.N)+(65535&o.N)+(a>>>16),a=(t.N>>>16)+(e.N>>>16)+(r.N>>>16)+(n.N>>>16)+(o.N>>>16)+(i>>>16),new j((65535&a)<<16|65535&i,s)}function G(t,e){return new j(t.N^e.N,t.I^e.I)}function q(t){var e=U(t,1),r=U(t,8),n=D(t,7);return new j(e.N^r.N^n.N,e.I^r.I^n.I)}function Y(t){var e=U(t,14),r=U(t,18),n=U(t,41);return new j(e.N^r.N^n.N,e.I^r.I^n.I)}var X=[new j(o[0],3609767458),new j(o[1],602891725),new j(o[2],3964484399),new j(o[3],2173295548),new j(o[4],4081628472),new j(o[5],3053834265),new j(o[6],2937671579),new j(o[7],3664609560),new j(o[8],2734883394),new j(o[9],1164996542),new j(o[10],1323610764),new j(o[11],3590304994),new j(o[12],4068182383),new j(o[13],991336113),new j(o[14],633803317),new j(o[15],3479774868),new j(o[16],2666613458),new j(o[17],944711139),new j(o[18],2341262773),new j(o[19],2007800933),new j(o[20],1495990901),new j(o[21],1856431235),new j(o[22],3175218132),new j(o[23],2198950837),new j(o[24],3999719339),new j(o[25],766784016),new j(o[26],2566594879),new j(o[27],3203337956),new j(o[28],1034457026),new j(o[29],2466948901),new j(o[30],3758326383),new j(o[31],168717936),new j(o[32],1188179964),new j(o[33],1546045734),new j(o[34],1522805485),new j(o[35],2643833823),new j(o[36],2343527390),new j(o[37],1014477480),new j(o[38],1206759142),new j(o[39],344077627),new j(o[40],1290863460),new j(o[41],3158454273),new j(o[42],3505952657),new j(o[43],106217008),new j(o[44],3606008344),new j(o[45],1432725776),new j(o[46],1467031594),new j(o[47],851169720),new j(o[48],3100823752),new j(o[49],1363258195),new j(o[50],3750685593),new j(o[51],3785050280),new j(o[52],3318307427),new j(o[53],3812723403),new j(o[54],2003034995),new j(o[55],3602036899),new j(o[56],1575990012),new j(o[57],1125592928),new j(o[58],2716904306),new j(o[59],442776044),new j(o[60],593698344),new j(o[61],3733110249),new j(o[62],2999351573),new j(o[63],3815920427),new j(3391569614,3928383900),new j(3515267271,566280711),new j(3940187606,3454069534),new j(4118630271,4000239992),new j(116418474,1914138554),new j(174292421,2731055270),new j(289380356,3203993006),new j(460393269,320620315),new j(685471733,587496836),new j(852142971,1086792851),new j(1017036298,365543100),new j(1126000580,2618297676),new j(1288033470,3409855158),new j(1501505948,4234509866),new j(1607167915,987167468),new j(1816402316,1246189591)];function V(t){return"SHA-384"===t?[new j(3418070365,i[0]),new j(1654270250,i[1]),new j(2438529370,i[2]),new j(355462360,i[3]),new j(1731405415,i[4]),new j(41048885895,i[5]),new j(3675008525,i[6]),new j(1203062813,i[7])]:[new j(a[0],4089235720),new j(a[1],2227873595),new j(a[2],4271175723),new j(a[3],1595750129),new j(a[4],2917565137),new j(a[5],725511199),new j(a[6],4215389547),new j(a[7],327033209)]}function W(t,e){var r,n,o,i,a,s,u,c,f,h,l,p,d,y,v,w,g=[];for(r=e[0],n=e[1],o=e[2],i=e[3],a=e[4],s=e[5],u=e[6],c=e[7],l=0;l<80;l+=1)l<16?(p=2*l,g[l]=new j(t[p],t[p+1])):g[l]=M((void 0,void 0,void 0,y=U(d=g[l-2],19),v=U(d,61),w=D(d,6),new j(y.N^v.N^w.N,y.I^v.I^w.I)),g[l-7],q(g[l-15]),g[l-16]),f=K(c,Y(a),B(a,s,u),X[l],g[l]),h=F(R(r),H(r,n,o)),c=u,u=s,s=a,a=F(i,f),i=o,o=n,n=r,r=F(f,h);return e[0]=F(r,e[0]),e[1]=F(n,e[1]),e[2]=F(o,e[2]),e[3]=F(i,e[3]),e[4]=F(a,e[4]),e[5]=F(s,e[5]),e[6]=F(u,e[6]),e[7]=F(c,e[7]),e}var z=function(t){function e(e,n,o){var i=this;if("SHA-384"!==e&&"SHA-512"!==e)throw new Error(s);var a=o||{};return(i=t.call(this,e,n,o)||this).F=i.Y,i.g=!0,i.C=-1,i.p=r(i.t,i.i,i.C),i.R=W,i.B=function(t){return t.slice()},i.L=V,i.K=function(t,r,n,o){return function(t,e,r,n,o){for(var i,a=31+(e+129>>>10<<5),s=e+r;t.length<=a;)t.push(0);for(t[e>>>5]|=128<<24-e%32,t[a]=4294967295&s,t[a-1]=s/4294967296|0,i=0;i<t.length;i+=32)n=W(t.slice(i,i+32),n);return"SHA-384"===o?[n[0].N,n[0].I,n[1].N,n[1].I,n[2].N,n[2].I,n[3].N,n[3].I,n[4].N,n[4].I,n[5].N,n[5].I]:[n[0].N,n[0].I,n[1].N,n[1].I,n[2].N,n[2].I,n[3].N,n[3].I,n[4].N,n[4].I,n[5].N,n[5].I,n[6].N,n[6].I,n[7].N,n[7].I]}(t,r,n,o,e)},i.m=V(e),i.S=1024,i.U="SHA-384"===e?384:512,i.T=!1,a.hmacKey&&i.k(f("hmacKey",a.hmacKey,i.C)),i}return p(e,t),e}(h),$=[new j(0,1),new j(0,32898),new j(2147483648,32906),new j(2147483648,2147516416),new j(0,32907),new j(0,2147483649),new j(2147483648,2147516545),new j(2147483648,32777),new j(0,138),new j(0,136),new j(0,2147516425),new j(0,2147483658),new j(0,2147516555),new j(2147483648,139),new j(2147483648,32905),new j(2147483648,32771),new j(2147483648,32770),new j(2147483648,128),new j(0,32778),new j(2147483648,2147483658),new j(2147483648,2147516545),new j(2147483648,32896),new j(0,2147483649),new j(2147483648,2147516424)],J=[[0,36,3,41,18],[1,44,10,45,2],[62,6,43,15,61],[28,55,25,21,56],[27,20,39,8,14]];function Z(t){var e,r=[];for(e=0;e<5;e+=1)r[e]=[new j(0,0),new j(0,0),new j(0,0),new j(0,0),new j(0,0)];return r}function Q(t){var e,r=[];for(e=0;e<5;e+=1)r[e]=t[e].slice();return r}function tt(t,e){var r,n,o,i,a,s,u,c,f,h=[],l=[];if(null!==t)for(n=0;n<t.length;n+=2)e[(n>>>1)%5][(n>>>1)/5|0]=G(e[(n>>>1)%5][(n>>>1)/5|0],new j(t[n+1],t[n]));for(r=0;r<24;r+=1){for(i=Z(),n=0;n<5;n+=1)h[n]=(a=e[n][0],s=e[n][1],u=e[n][2],c=e[n][3],f=e[n][4],new j(a.N^s.N^u.N^c.N^f.N,a.I^s.I^u.I^c.I^f.I));for(n=0;n<5;n+=1)l[n]=G(h[(n+4)%5],P(h[(n+1)%5],1));for(n=0;n<5;n+=1)for(o=0;o<5;o+=1)e[n][o]=G(e[n][o],l[n]);for(n=0;n<5;n+=1)for(o=0;o<5;o+=1)i[o][(2*n+3*o)%5]=P(e[n][o],J[n][o]);for(n=0;n<5;n+=1)for(o=0;o<5;o+=1)e[n][o]=G(i[n][o],new j(~i[(n+1)%5][o].N&i[(n+2)%5][o].N,~i[(n+1)%5][o].I&i[(n+2)%5][o].I));e[0][0]=G(e[0][0],$[r])}return e}function et(t){var e,r,n=0,o=[0,0],i=[4294967295&t,t/4294967296&2097151];for(e=6;e>=0;e--)0==(r=i[e>>2]>>>8*e&255)&&0===n||(o[n+1>>2]|=r<<8*(n+1),n+=1);return n=0!==n?n:1,o[0]|=n,{value:n+1>4?o:[o[0]],binLen:8+8*n}}function rt(t){return u(et(t.binLen),t)}function nt(t,e){var r,n=et(e),o=e>>>2,i=(o-(n=u(n,t)).value.length%o)%o;for(r=0;r<i;r++)n.value.push(0);return n.value}var ot=function(t){function e(e,n,o){var i=this,a=6,u=0,c=o||{};if(1!==(i=t.call(this,e,n,o)||this).numRounds){if(c.kmacKey||c.hmacKey)throw new Error("Cannot set numRounds with MAC");if("CSHAKE128"===i.o||"CSHAKE256"===i.o)throw new Error("Cannot set numRounds for CSHAKE variants")}switch(i.C=1,i.p=r(i.t,i.i,i.C),i.R=tt,i.B=Q,i.L=Z,i.m=Z(),i.T=!1,e){case"SHA3-224":i.S=u=1152,i.U=224,i.g=!0,i.F=i.Y;break;case"SHA3-256":i.S=u=1088,i.U=256,i.g=!0,i.F=i.Y;break;case"SHA3-384":i.S=u=832,i.U=384,i.g=!0,i.F=i.Y;break;case"SHA3-512":i.S=u=576,i.U=512,i.g=!0,i.F=i.Y;break;case"SHAKE128":a=31,i.S=u=1344,i.U=-1,i.T=!0,i.g=!1,i.F=null;break;case"SHAKE256":a=31,i.S=u=1088,i.U=-1,i.T=!0,i.g=!1,i.F=null;break;case"KMAC128":a=4,i.S=u=1344,i.M(o),i.U=-1,i.T=!0,i.g=!1,i.F=i.X;break;case"KMAC256":a=4,i.S=u=1088,i.M(o),i.U=-1,i.T=!0,i.g=!1,i.F=i.X;break;case"CSHAKE128":i.S=u=1344,a=i.O(o),i.U=-1,i.T=!0,i.g=!1,i.F=null;break;case"CSHAKE256":i.S=u=1088,a=i.O(o),i.U=-1,i.T=!0,i.g=!1,i.F=null;break;default:throw new Error(s)}return i.K=function(t,e,r,n,o){return function(t,e,r,n,o,i,a){var s,u,c=0,f=[],h=o>>>5,l=e>>>5;for(s=0;s<l&&e>=o;s+=h)n=tt(t.slice(s,s+h),n),e-=o;for(t=t.slice(s),e%=o;t.length<h;)t.push(0);for(t[(s=e>>>3)>>2]^=i<<s%4*8,t[h-1]^=2147483648,n=tt(t,n);32*f.length<a&&(u=n[c%5][c/5|0],f.push(u.I),!(32*f.length>=a));)f.push(u.N),0==64*(c+=1)%o&&(tt(null,n),c=0);return f}(t,e,0,n,u,a,o)},c.hmacKey&&i.k(f("hmacKey",c.hmacKey,i.C)),i}return p(e,t),e.prototype.O=function(t,e){var r=function(t){var e=t||{};return{funcName:f("funcName",e.funcName,1,{value:[],binLen:0}),customization:f("Customization",e.customization,1,{value:[],binLen:0})}}(t||{});e&&(r.funcName=e);var n=u(rt(r.funcName),rt(r.customization));if(0!==r.customization.binLen||0!==r.funcName.binLen){for(var o=nt(n,this.S>>>3),i=0;i<o.length;i+=this.S>>>5)this.m=this.R(o.slice(i,i+(this.S>>>5)),this.m),this.v+=this.S;return 4}return 31},e.prototype.M=function(t){var e=function(t){var e=t||{};return{kmacKey:f("kmacKey",e.kmacKey,1),funcName:{value:[1128353099],binLen:32},customization:f("Customization",e.customization,1,{value:[],binLen:0})}}(t||{});this.O(t,e.funcName);for(var r=nt(rt(e.kmacKey),this.S>>>3),n=0;n<r.length;n+=this.S>>>5)this.m=this.R(r.slice(n,n+(this.S>>>5)),this.m),this.v+=this.S;this.A=!0},e.prototype.X=function(t){var e=u({value:this.u.slice(),binLen:this.s},function(t){var e,r,n=0,o=[0,0],i=[4294967295&t,t/4294967296&2097151];for(e=6;e>=0;e--)0==(r=i[e>>2]>>>8*e&255)&&0===n||(o[n>>2]|=r<<8*n,n+=1);return o[(n=0!==n?n:1)>>2]|=n<<8*n,{value:n+1>4?o:[o[0]],binLen:8+8*n}}(t.outputLen));return this.K(e.value,e.binLen,this.v,this.B(this.m),t.outputLen)},e}(h);return function(){function t(t,e,r){if("SHA-1"==t)this.j=new N(t,e,r);else if("SHA-224"==t||"SHA-256"==t)this.j=new _(t,e,r);else if("SHA-384"==t||"SHA-512"==t)this.j=new z(t,e,r);else{if("SHA3-224"!=t&&"SHA3-256"!=t&&"SHA3-384"!=t&&"SHA3-512"!=t&&"SHAKE128"!=t&&"SHAKE256"!=t&&"CSHAKE128"!=t&&"CSHAKE256"!=t&&"KMAC128"!=t&&"KMAC256"!=t)throw new Error(s);this.j=new ot(t,e,r)}}return t.prototype.update=function(t){this.j.update(t)},t.prototype.getHash=function(t,e){return this.j.getHash(t,e)},t.prototype.setHMACKey=function(t,e,r){this.j.setHMACKey(t,e,r)},t.prototype.getHMAC=function(t,e){return this.j.getHMAC(t,e)},t}()}()},833:(t,e,r)=>{"use strict";let n=r(53);function o(t){return parseInt(t,16)}function i(t,e,r){return e+1>=t.length&&(t=Array(e+1-t.length).join(r)+t),t}n.default&&(n=n.default),t.exports=function(t,e){let r,a,s,u,c,f;var h;return(e=e||{}).period=e.period||30,e.algorithm=e.algorithm||"SHA-1",e.digits=e.digits||6,e.timestamp=e.timestamp||Date.now(),t=function(t){let e="",r="";t=t.replace(/=+$/,"");for(let r=0;r<t.length;r++){let n="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567".indexOf(t.charAt(r).toUpperCase());if(-1===n)throw new Error("Invalid base32 character in key");e+=i(n.toString(2),5,"0")}for(let t=0;t+8<=e.length;t+=8){let n=e.substr(t,8);r+=i(parseInt(n,2).toString(16),2,"0")}return r}(t),r=Math.round(e.timestamp/1e3),a=i(((h=Math.floor(r/e.period))<15.5?"0":"")+Math.round(h).toString(16),16,"0"),s=new n(e.algorithm,"HEX"),s.setHMACKey(t,"HEX"),s.update(a),u=s.getHMAC("HEX"),c=o(u.substring(u.length-1)),f=(o(u.substr(2*c,8))&o("7fffffff"))+"",f=f.substr(Math.max(f.length-e.digits,0),e.digits),f}}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var i=e[n]={exports:{}};return t[n].call(i.exports,i,i.exports,r),i.exports}r.amdO={},r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var n={};return(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(){e=function(){return r};var r={},n=Object.prototype,o=n.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},s=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(t){f=function(t,e,r){return t[e]=r}}function h(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,a=Object.create(o.prototype),s=new k(n||[]);return i(a,"_invoke",{value:A(t,r,s)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}r.wrap=h;var p={};function d(){}function y(){}function v(){}var w={};f(w,s,(function(){return this}));var g=Object.getPrototypeOf,b=g&&g(g(I([])));b&&b!==n&&o.call(b,s)&&(w=b);var m=v.prototype=d.prototype=Object.create(w);function E(t){["next","throw","return"].forEach((function(e){f(t,e,(function(t){return this._invoke(e,t)}))}))}function x(e,r){function n(i,a,s,u){var c=l(e[i],e,a);if("throw"!==c.type){var f=c.arg,h=f.value;return h&&"object"==t(h)&&o.call(h,"__await")?r.resolve(h.__await).then((function(t){n("next",t,s,u)}),(function(t){n("throw",t,s,u)})):r.resolve(h).then((function(t){f.value=t,s(f)}),(function(t){return n("throw",t,s,u)}))}u(c.arg)}var a;i(this,"_invoke",{value:function(t,e){function o(){return new r((function(r,o){n(t,e,r,o)}))}return a=a?a.then(o,o):o()}})}function A(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=S(a,r);if(s){if(s===p)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===p)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function S(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,S(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=l(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,p;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,p):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function I(t){if(t){var e=t[s];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,n=function e(){for(;++r<t.length;)if(o.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return n.next=n}}return{next:N}}function N(){return{value:void 0,done:!0}}return y.prototype=v,i(m,"constructor",{value:v,configurable:!0}),i(v,"constructor",{value:y,configurable:!0}),y.displayName=f(v,c,"GeneratorFunction"),r.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},r.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,f(t,c,"GeneratorFunction")),t.prototype=Object.create(m),t},r.awrap=function(t){return{__await:t}},E(x.prototype),f(x.prototype,u,(function(){return this})),r.AsyncIterator=x,r.async=function(t,e,n,o,i){void 0===i&&(i=Promise);var a=new x(h(t,e,n,o),i);return r.isGeneratorFunction(e)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},E(m),f(m,c,"Generator"),f(m,s,(function(){return this})),f(m,"toString",(function(){return"[object Generator]"})),r.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},r.values=I,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(L),!t)for(var e in this)"t"===e.charAt(0)&&o.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=o.call(i,"catchLoc"),u=o.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),L(r),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:I(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},r}function o(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}function i(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var a=t.apply(e,r);function s(t){o(a,n,i,s,u,"next",t)}function u(t){o(a,n,i,s,u,"throw",t)}s(void 0)}))}}function a(e,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,i=function(e,r){if("object"!==t(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,r);if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key,"string"),"symbol"===t(i)?i:String(i)),o)}var i}r.r(n),r.d(n,{extend:()=>ut,init:()=>st});const s=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.post=e.post,this.duplex=e.duplex}var r,n,o,s,u,c,f,h;return r=t,n=[{key:"login",value:(h=i(e().mark((function t(r,n){var o;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("undefined"!=typeof window){t.next=2;break}return t.abrupt("return",console.warn("The login feature is not available in node. Get auth token from Grandeur Dashboard and use the token() function."));case 2:return t.next=4,this.post.send("/auth/login",{email:r,password:n});case 4:return"AUTH-ACCOUNT-LOGGEDIN"===(o=t.sent).code&&("undefined"!=typeof window&&localStorage.setItem("grandeur-auth-".concat(this.post.config.apiKey),o.token),this.post.config.token=o.token),t.abrupt("return",o);case 7:case"end":return t.stop()}}),t,this)}))),function(t,e){return h.apply(this,arguments)})},{key:"register",value:(f=i(e().mark((function t(r,n,o,a){var s,u=this;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("undefined"!=typeof window){t.next=2;break}return t.abrupt("return",console.warn("The login feature is not available in node. Get auth token from Grandeur Dashboard and use the token() function."));case 2:return t.prev=2,t.next=5,this.post.send("/auth/register",{email:r,password:n,displayName:o,phone:a});case 5:if("PHONE-CODE-SENT"!==(s=t.sent).code){t.next=10;break}return t.abrupt("return",{code:s.code,message:s.message,confirm:function(){var t=i(e().mark((function t(r){var n;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.post.send("/auth/register",{token:s.token,verificationCode:r});case 2:return"AUTH-ACCOUNT-REGISTERED"===(n=t.sent).code&&("undefined"!=typeof window&&localStorage.setItem("grandeur-auth-".concat(u.post.config.apiKey),s.token),u.post.config.token=s.token),t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()});case 10:return t.abrupt("return",s);case 11:t.next=16;break;case 13:throw t.prev=13,t.t0=t.catch(2),t.t0;case 16:case"end":return t.stop()}}),t,this,[[2,13]])}))),function(t,e,r,n){return f.apply(this,arguments)})},{key:"updateProfile",value:(c=i(e().mark((function t(r,n,o){var i,a=this;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.post.send("/auth/updateProfile",{displayName:r,phone:o,displayPicture:n});case 3:if("PHONE-CODE-SENT"!==(i=t.sent).code){t.next=8;break}return t.abrupt("return",{code:i.code,message:i.message,confirm:function(t){return a.post.send("/auth/updateProfile",{token:i.token,verificationCode:t})}});case 8:return t.abrupt("return",i);case 9:t.next=14;break;case 11:throw t.prev=11,t.t0=t.catch(0),t.t0;case 14:case"end":return t.stop()}}),t,this,[[0,11]])}))),function(t,e,r){return c.apply(this,arguments)})},{key:"forgotPassword",value:(u=i(e().mark((function t(r){var n,o=this;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.post.send("/auth/forgotPassword",{email:r});case 3:if("PHONE-CODE-SENT"!==(n=t.sent).code){t.next=8;break}return t.abrupt("return",{code:n.code,message:n.message,confirm:function(t,e){return o.post.send("/auth/forgotPassword",{token:n.token,verificationCode:t,password:e})}});case 8:return t.abrupt("return",n);case 9:t.next=14;break;case 11:throw t.prev=11,t.t0=t.catch(0),t.t0;case 14:case"end":return t.stop()}}),t,this,[[0,11]])}))),function(t){return u.apply(this,arguments)})},{key:"changePassword",value:(s=i(e().mark((function t(r){var n,o=this;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.post.send("/auth/changePassword",{password:r});case 3:if("PHONE-CODE-SENT"!==(n=t.sent).code){t.next=8;break}return t.abrupt("return",{code:n.code,message:n.message,confirm:function(t){return o.post.send("/auth/changePassword",{token:n.token,verificationCode:t})}});case 8:return t.abrupt("return",n);case 9:t.next=14;break;case 11:throw t.prev=11,t.t0=t.catch(0),t.t0;case 14:case"end":return t.stop()}}),t,this,[[0,11]])}))),function(t){return s.apply(this,arguments)})},{key:"isAuthenticated",value:function(){return this.post.send("/auth/protectedpage",{})}},{key:"ping",value:function(){return this.post.send("/auth/ping",{})}},{key:"logout",value:function(){return this.post.send("/auth/logout",{})}},{key:"token",value:(o=i(e().mark((function t(r){var n;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.post.send("/auth/ping",{},r);case 3:if("AUTH-AUTHORIZED"!==(n=t.sent).code){t.next=8;break}return this.post.config.token=r,this.duplex.reconnect(),t.abrupt("return",n);case 8:throw{code:"TOKEN-INVALID"};case 11:throw t.prev=11,t.t0=t.catch(0),t.t0;case 14:case"end":return t.stop()}}),t,this,[[0,11]])}))),function(t){return o.apply(this,arguments)})}],n&&a(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),t}();function u(){u=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function f(t,e,r,o){var i=e&&e.prototype instanceof d?e:d,a=Object.create(i.prototype),s=new k(o||[]);return n(a,"_invoke",{value:A(t,r,s)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=f;var p={};function d(){}function y(){}function v(){}var w={};c(w,i,(function(){return this}));var g=Object.getPrototypeOf,b=g&&g(g(I([])));b&&b!==e&&r.call(b,i)&&(w=b);var m=v.prototype=d.prototype=Object.create(w);function E(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function o(n,i,a,s){var u=h(t[n],t,i);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==l(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,s)}),(function(t){o("throw",t,a,s)})):e.resolve(f).then((function(t){c.value=t,a(c)}),(function(t){return o("throw",t,a,s)}))}s(u.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function A(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=S(a,r);if(s){if(s===p)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=h(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===p)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function S(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,S(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=h(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,p;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,p):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function I(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:N}}function N(){return{value:void 0,done:!0}}return y.prototype=v,n(m,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:y,configurable:!0}),y.displayName=c(v,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,c(t,s,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},E(x.prototype),c(x.prototype,a,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new x(f(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},E(m),c(m,s,"Generator"),c(m,i,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=I,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(L),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),L(r),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:I(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},t}function c(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}function f(t){return function(t){if(Array.isArray(t))return h(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return h(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?h(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function l(t){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}function p(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==l(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e);if("object"!==l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key,"string"),"symbol"===l(o)?o:String(o)),n)}var o}function y(t,e,r){return e&&d(t.prototype,e),r&&d(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}var v=function(){function t(e,r){p(this,t),this.post=e.post,this.duplex=e.duplex,this.deviceID=r}return y(t,[{key:"set",value:function(t,e){var r={deviceID:this.deviceID,path:t,data:e};return this.duplex.send("/device/data/set",r)}},{key:"on",value:function(t,e){var r={event:"data",path:t,deviceID:this.deviceID};return this.duplex.subscribe("data",r,e)}},{key:"get",value:function(t){var e=this;if(t)return new w((function(r,n){var o={deviceID:e.deviceID,path:t,nPage:n,query:r};return e.duplex.send("/device/data/get",o)}),[],1);var r={deviceID:this.deviceID,path:t};return this.duplex.send("/device/data/get",r)}},{key:"delete",value:function(t){var e=this;return new w((function(r,n){var o={deviceID:e.deviceID,path:t,nPage:n,query:r};return e.duplex.send("/device/data/delete",o)}),[],1)}}]),t}(),w=function(){function t(e,r,n){p(this,t),this.query=r||[],this.nPage=n,this.execute=e}return y(t,[{key:"to",value:function(e){var r=[].concat(f(this.query),[{type:"to",condition:e}]);return new t(this.execute,r,this.nPage)}},{key:"from",value:function(e){var r=[].concat(f(this.query),[{type:"from",condition:e}]);return new t(this.execute,r,this.nPage)}},{key:"gt",value:function(e){var r=[].concat(f(this.query),[{type:"gt",condition:e}]);return new t(this.execute,r,this.nPage)}},{key:"lt",value:function(e){var r=[].concat(f(this.query),[{type:"lt",condition:e}]);return new t(this.execute,r,this.nPage)}},{key:"gte",value:function(e){var r=[].concat(f(this.query),[{type:"gte",condition:e}]);return new t(this.execute,r,this.nPage)}},{key:"lte",value:function(e){var r=[].concat(f(this.query),[{type:"lte",condition:e}]);return new t(this.execute,r,this.nPage)}},{key:"eq",value:function(e){var r=[].concat(f(this.query),[{type:"eq",condition:e}]);return new t(this.execute,r,this.nPage)}},{key:"sort",value:function(e){var r=[].concat(f(this.query),[{type:"sort",specs:e}]);return new t(this.execute,r,this.nPage)}},{key:"page",value:function(e){return new t(this.execute,this.query,e)}},{key:"then",value:function(t,e){var r=this;return new Promise(function(){var n,o=(n=u().mark((function n(o,i){var a;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,r.execute(r.query,r.nPage);case 3:a=n.sent,o(a),t&&t(a),n.next=12;break;case 8:n.prev=8,n.t0=n.catch(0),i(n.t0),e&&e(n.t0);case 12:case"end":return n.stop()}}),n,null,[[0,8]])})),function(){var t=this,e=arguments;return new Promise((function(r,o){var i=n.apply(t,e);function a(t){c(i,r,o,a,s,"next",t)}function s(t){c(i,r,o,a,s,"throw",t)}a(void 0)}))});return function(t,e){return o.apply(this,arguments)}}())}}]),t}(),g=function(){function t(e,r){p(this,t),this.post=e.post,this.duplex=e.duplex,this.deviceID=r}return y(t,[{key:"pair",value:function(){var t={deviceID:this.deviceID};return this.duplex.send("/device/pair",t)}},{key:"unpair",value:function(){var t={deviceID:this.deviceID};return this.duplex.send("/device/unpair",t)}},{key:"get",value:function(t){var e={deviceID:this.deviceID,path:t};return this.duplex.send("/device/get",e)}},{key:"set",value:function(t,e){var r={deviceID:this.deviceID,path:t,data:e};return this.duplex.send("/device/set",r)}},{key:"on",value:function(t,e){var r={event:t,deviceID:this.deviceID};return this.duplex.subscribe(t,r,e)}},{key:"data",value:function(){return new v({post:this.post,duplex:this.duplex},this.deviceID)}}]),t}();const b=function(){function t(e){p(this,t),this.post=e.post,this.duplex=e.duplex}return y(t,[{key:"get",value:function(t){var e={filter:t};return this.duplex.send("/devices/get",e)}},{key:"count",value:function(t){var e={filter:t};return this.duplex.send("/devices/count",e)}},{key:"on",value:function(t){return this.duplex.subscribe("devices",{event:"devices"},t)}},{key:"device",value:function(t){return new g({post:this.post,duplex:this.duplex},t)}}]),t}();function m(t){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m(t)}function E(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function x(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==m(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e);if("object"!==m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key,"string"),"symbol"===m(o)?o:String(o)),n)}var o}function A(t,e,r){return e&&x(t.prototype,e),r&&x(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}var S=function(){function t(e,r,n,o){E(this,t),this.post=e.post,this.duplex=e.duplex,this.collection=r,this.index=n,this.query=o}return A(t,[{key:"match",value:function(e){return this.query.push({type:"match",filter:e}),new t({post:this.post,duplex:this.duplex},this.collection,this.index,this.query)}},{key:"project",value:function(e){return this.query.push({type:"project",specs:e}),new t({post:this.post,duplex:this.duplex},this.collection,this.index,this.query)}},{key:"group",value:function(e,r){return this.query.push({type:"group",condition:e,fields:r}),new t({post:this.post,duplex:this.duplex},this.collection,this.index,this.query)}},{key:"sort",value:function(e){return this.query.push({type:"sort",specs:e}),new t({post:this.post,duplex:this.duplex},this.collection,this.index,this.query)}},{key:"execute",value:function(t){var e={collection:this.collection,index:this.index,pipeline:this.query,nPage:t};return this.duplex.send("/datastore/pipeline",e)}}]),t}(),O=function(){function t(e,r){E(this,t),this.post=e.post,this.duplex=e.duplex,this.collection=r}return A(t,[{key:"insert",value:function(t){var e={collection:this.collection,documents:t};return this.duplex.send("/datastore/insert",e)}},{key:"delete",value:function(t){var e={collection:this.collection,filter:t};return this.duplex.send("/datastore/delete",e)}},{key:"update",value:function(t,e){var r={collection:this.collection,filter:t,update:e};return this.duplex.send("/datastore/update",r)}},{key:"search",value:function(t,e,r){var n=new S({post:this.post,duplex:this.duplex},this.collection,{},[]).match(t);return e&&(n=n.project(e)),n.execute(r)}},{key:"pipeline",value:function(t){return new S({post:this.post,duplex:this.duplex},this.collection,t,[])}}]),t}();const L=function(){function t(e){E(this,t),this.post=e.post,this.duplex=e.duplex}return A(t,[{key:"collection",value:function(t){return new O({post:this.post,duplex:this.duplex},t)}},{key:"list",value:function(t){var e={nPage:t};return this.duplex.send("/datastore/list",e)}},{key:"drop",value:function(t){var e={collection:t};return this.duplex.send("/datastore/drop",e)}}]),t}();var k=r(833),I=r.n(k),N=r(90),C=r(559),T=r.n(C);function _(t){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_(t)}function j(){j=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function c(t,e,r,o){var i=e&&e.prototype instanceof l?e:l,a=Object.create(i.prototype),s=new O(o||[]);return n(a,"_invoke",{value:E(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var h={};function l(){}function p(){}function d(){}var y={};u(y,i,(function(){return this}));var v=Object.getPrototypeOf,w=v&&v(v(L([])));w&&w!==e&&r.call(w,i)&&(y=w);var g=d.prototype=l.prototype=Object.create(y);function b(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function m(t,e){function o(n,i,a,s){var u=f(t[n],t,i);if("throw"!==u.type){var c=u.arg,h=c.value;return h&&"object"==_(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){o("next",t,a,s)}),(function(t){o("throw",t,a,s)})):e.resolve(h).then((function(t){c.value=t,a(c)}),(function(t){return o("throw",t,a,s)}))}s(u.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function E(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=x(a,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function x(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var o=f(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,h;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function L(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=d,n(g,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:p,configurable:!0}),p.displayName=u(d,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,u(t,s,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},b(m.prototype),u(m.prototype,a,(function(){return this})),t.AsyncIterator=m,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new m(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(g),u(g,s,"Generator"),u(g,i,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=L,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:L(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}function P(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}function U(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==_(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e);if("object"!==_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key,"string"),"symbol"===_(o)?o:String(o)),n)}var o}const D=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.config=e,this.status="ACTIVE"}var e,r;return e=t,r=[{key:"dispose",value:function(){this.status="DISPOSED"}},{key:"send",value:function(t,e,r){var n=this;return new Promise(function(){var o,i=(o=j().mark((function o(i,a){var s,u,c,f,h,l,p;return j().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if("DISPOSED"!==n.status){o.next=2;break}return o.abrupt("return",a({code:"DISPOSED"}));case 2:return s="".concat(n.config.url).concat(t||"/","?apiKey=").concat(n.config.apiKey),u=r||n.config.token||"",c={authorization:u},f=JSON.stringify(e),c["content-type"]="application/json",c["gt-otp"]=I()((0,N.encode)(n.config.secretKey)),h=T()(),l=h.fetch,o.prev=10,o.next=13,l(s,{method:"POST",mode:"cors",body:f,credentials:"include",SameSite:"none",headers:c});case 13:return p=o.sent,o.next=16,p.json();case 16:p=o.sent,i(p),o.next=23;break;case 20:o.prev=20,o.t0=o.catch(10),a({code:"CONNECTION-REFUSED"});case 23:case"end":return o.stop()}}),o,null,[[10,20]])})),function(){var t=this,e=arguments;return new Promise((function(r,n){var i=o.apply(t,e);function a(t){P(i,r,n,a,s,"next",t)}function s(t){P(i,r,n,a,s,"throw",t)}a(void 0)}))});return function(t,e){return i.apply(this,arguments)}}())}}],r&&U(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();var B=r(187),H=null;"undefined"!=typeof WebSocket?H=WebSocket:"undefined"!=typeof MozWebSocket?H=MozWebSocket:void 0!==r.g?H=r.g.WebSocket||r.g.MozWebSocket:"undefined"!=typeof window?H=window.WebSocket||window.MozWebSocket:"undefined"!=typeof self&&(H=self.WebSocket||self.MozWebSocket);const R=H;var F=r(981);function M(t){return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},M(t)}function K(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function G(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?K(Object(r),!0).forEach((function(e){q(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):K(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function q(t,e,r){return(e=$(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Y(){Y=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function c(t,e,r,o){var i=e&&e.prototype instanceof l?e:l,a=Object.create(i.prototype),s=new O(o||[]);return n(a,"_invoke",{value:E(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var h={};function l(){}function p(){}function d(){}var y={};u(y,i,(function(){return this}));var v=Object.getPrototypeOf,w=v&&v(v(L([])));w&&w!==e&&r.call(w,i)&&(y=w);var g=d.prototype=l.prototype=Object.create(y);function b(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function m(t,e){function o(n,i,a,s){var u=f(t[n],t,i);if("throw"!==u.type){var c=u.arg,h=c.value;return h&&"object"==M(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){o("next",t,a,s)}),(function(t){o("throw",t,a,s)})):e.resolve(h).then((function(t){c.value=t,a(c)}),(function(t){return o("throw",t,a,s)}))}s(u.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function E(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=x(a,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function x(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var o=f(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,h;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function L(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=d,n(g,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:p,configurable:!0}),p.displayName=u(d,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,u(t,s,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},b(m.prototype),u(m.prototype,a,(function(){return this})),t.AsyncIterator=m,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new m(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(g),u(g,s,"Generator"),u(g,i,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=L,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:L(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}function X(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}function V(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function W(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,$(n.key),n)}}function z(t,e,r){return e&&W(t.prototype,e),r&&W(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function $(t){var e=function(t,e){if("object"!==M(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e);if("object"!==M(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t,"string");return"symbol"===M(e)?e:String(e)}function J(t,e){return J=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},J(t,e)}function Z(t,e){if(e&&("object"===M(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Q(t){return Q=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Q(t)}var tt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&J(t,e)}(o,t);var e,r,n=(e=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=Q(e);if(r){var o=Q(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return Z(this,t)});function o(){return V(this,o),n.apply(this,arguments)}return z(o,[{key:"pEmit",value:function(t){for(var e=this,r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];this.eventNames().forEach((function(r){t.match(new RegExp(r))&&e.emit.apply(e,[r].concat(n))}))}}]),o}(B.EventEmitter),et=function(){function t(){V(this,t),this.list={}}return z(t,[{key:"push",value:function(t,e){this.list[t]=e}},{key:"forEach",value:function(t){var e=this;Object.keys(this.list).forEach((function(r){return t(e.list[r])}))}},{key:"remove",value:function(t){delete this.list[t]}}]),t}();const rt=function(){function t(e,r){V(this,t),this.config=e,this.auth=r,this.tasks=new tt,this.subscriptions=new tt,this.status="CONNECTING",this.cConnection=null,this.buffer=new et,this.topics={user:["devices"],device:["name","status","data"]},this.abort=!1}var e,r;return z(t,[{key:"init",value:(e=Y().mark((function t(){var e,r,n,o=this;return Y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.abort=!1,t.prev=1,t.next=4,this.auth.ping();case 4:if(e=t.sent,!this.abort){t.next=7;break}return t.abrupt("return");case 7:t.t0=e.code,t.next="AUTH-AUTHORIZED"===t.t0?10:"AUTH-UNAUTHORIZED"===t.t0?15:"SIGNATURE-INVALID"===t.t0||"TOTP-INVALID"===t.t0?19:22;break;case 10:return r=this.config.token||"",n="".concat(this.config.node,"?apiKey=").concat(this.config.apiKey,"&token=").concat(r),this.ws=new R(n,"node"),t.abrupt("break",22);case 15:return this.reconnect(),this.setStatus("AUTH-UNAUTHORIZED"),this.flush(),t.abrupt("return");case 19:return this.setStatus("SIGNATURE-INVALID"),this.flush(),t.abrupt("return");case 22:t.next=30;break;case 24:return t.prev=24,t.t1=t.catch(1),this.reconnect(),this.setStatus("CONNECTION-REFUSED"),this.flush(),t.abrupt("return");case 30:this.ws.onopen=function(){o.setStatus("CONNECTED"),o.cConnection&&o.cConnection("CONNECTED"),o.ping=setInterval((function(){o.ws.send(JSON.stringify({header:{id:"ping",task:"ping"},payload:{}}))}),25e3),o.handle()},this.ws.onclose=function(){o.setStatus("CONNECTING"),o.cConnection&&o.cConnection("DISCONNECTED"),clearInterval(o.ping),o.reconnect()},this.ws.onmessage=function(t){var e=JSON.parse(t.data);if("update"===e.header.task)if(o.topics.device.includes(e.payload.event)){var r="".concat(e.payload.deviceID,"/").concat(e.payload.event).concat(e.payload.path?"/".concat(e.payload.path):"");"data"===e.payload.event?o.subscriptions.pEmit(r,e.payload.path,e.payload.update):o.subscriptions.emit(r,e.payload.update)}else o.subscriptions.emit(e.payload.event,e.payload.update);else e.payload&&delete e.payload.message,o.tasks.emit(e.header.id,e.payload),"/topic/subscribe"!==e.header.task&&o.buffer.remove(e.header.id)};case 33:case"end":return t.stop()}}),t,this,[[1,24]])})),r=function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(t){X(i,n,o,a,s,"next",t)}function s(t){X(i,n,o,a,s,"throw",t)}a(void 0)}))},function(){return r.apply(this,arguments)})},{key:"reconnect",value:function(){var t=this;if("DISPOSED"!==this.status){if(this.abort=!0,clearTimeout(this.recon),"CONNECTED"===this.status)return this.ws.close(),void this.setStatus("DISCONNECTED");this.recon=setTimeout((function(){t.setStatus("CONNECTING"),t.init()}),5e3)}}},{key:"setStatus",value:function(t){"DISPOSED"!==this.status&&(this.status=t)}},{key:"dispose",value:function(){"CONNECTED"===this.status&&this.ws.close(),this.setStatus("DISPOSED"),clearTimeout(this.recon)}},{key:"disconnect",value:function(){"CONNECTED"===this.status&&this.ws.close(),this.setStatus("DISCONNECTED"),clearTimeout(this.recon)}},{key:"onConnection",value:function(t){var e=this;return this.cConnection=t,{clear:function(){e.cConnection=void 0}}}},{key:"handle",value:function(){var t=this;this.buffer.forEach((function(e){t.ws.send(JSON.stringify(e))}))}},{key:"flush",value:function(){var t=this;this.buffer.forEach((function(e){t.tasks.emit(e.header.id,void 0,{code:t.status}),t.buffer.remove(e.header.id)}))}},{key:"send",value:function(t,e){var r=this;return new Promise((function(n,o){if("SIGNATURE-INVALID"!==r.status&&"DISPOSED"!==r.status){var i=(0,F.Mc)(),a={header:{id:i,task:t},payload:e};r.tasks.once(i,(function(t,e){if(e)return o(e);n(t)})),"CONNECTED"===r.status?r.ws.send(JSON.stringify(a)):r.buffer.push(i,a)}else o({code:r.status})}))}},{key:"subscribe",value:function(t,e,r){var n=this;if(this.topics.device.includes(t)||this.topics.user.includes(t)){if(!this.topics.device.includes(t)||e.deviceID)return new Promise((function(o,i){if("SIGNATURE-INVALID"!==n.status&&"DISPOSED"!==n.status){var a=(0,F.Mc)(),s={header:{id:a,task:"/topic/subscribe"},payload:e},u=t;n.topics.device.includes(t)&&(u="".concat(e.deviceID,"/").concat(t).concat(e.path?"/".concat(e.path):""));var c=function(){return n.subscriptions.removeListener(u,r),n.subscriptions.listenerCount(u)>0?new Promise((function(t,e){return t({code:"TOPIC-UNSUBSCRIBED"})})):(n.buffer.remove(a),n.send("/topic/unsubscribe",e))};n.subscriptions.listenerCount(u)>0?(n.subscriptions.on(u,r),o({code:"TOPIC-SUBSCRIBED",clear:c})):(n.tasks.once(a,(function(t,e){if(e)return i(e);n.subscriptions.on(u,r),o(G(G({},t),{},{clear:c}))})),n.buffer.push(a,s),"CONNECTED"===n.status&&n.ws.send(JSON.stringify(s)))}else i({code:n.status})}));r({code:"DATA-INVALID"})}else r({code:"TOPIC-INVALID"})}}]),t}();function nt(t){return nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nt(t)}function ot(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function it(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==nt(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e);if("object"!==nt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t,"string");return"symbol"===nt(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var at={};function st(t,e,r){if("undefined"!=typeof window)var n=localStorage.getItem("grandeur-auth-".concat(t));var o={apiKey:t,secretKey:e,token:(null==r?void 0:r.token)||n,url:(null==r?void 0:r.url)||"https://api.grandeur.tech",node:(null==r?void 0:r.node)||"wss://api.grandeur.tech"},i=new D(o),a=new rt(o,new s({post:i})),u={post:i,duplex:a};a.init();var c={};return Object.keys(at).map((function(t){return c[t]=function(){return new at[t](u)}})),function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ot(Object(r),!0).forEach((function(e){it(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ot(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({isConnected:function(){return"CONNECTED"===u.duplex.status},onConnection:function(t){return u.duplex.onConnection(t)},on:function(t){return u.duplex.onConnection(t)},dispose:function(){u.duplex.dispose(),u.post.dispose()},auth:function(){return new s(u)},devices:function(){return new b(u)},datastore:function(){return new L(u)}},c)}function ut(t){at=t}})(),n})()));